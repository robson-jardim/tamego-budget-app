<ng-container *ngIf="onTransactionsChange$ | async as combined; else loading">

    <div class="view-transaction-container">

        <mat-card class="transaction-table">

            <mat-card-header class="material-table-header material-table-grey">

                <div>
                    <h1 id="table-header-name" class="mat-title">Transactions</h1>
                </div>

                <div class="transactions-table-header-options">
                    <button mat-raised-button color="primary" (click)="createTransaction()">Add transaction</button>
                </div>
            </mat-card-header>

            <mat-card-content>
                <app-transaction-table
                    [transactions]="combined.transactions"
                    [payees]="combined.viewData.payees"
                    [accounts]="combined.viewData.accounts"
                    [groups]="combined.viewData.groups"
                    [budgetId]="combined.budgetId"
                    [onChange]="onTransactionsChange$">
                </app-transaction-table>
            </mat-card-content>

        </mat-card>

    </div>

</ng-container>

<ng-template #loading>
    <div class="progress-spinner">
        <mat-spinner diameter="60"></mat-spinner>
    </div>
</ng-template>
