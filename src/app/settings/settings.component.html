<app-header></app-header>

<div class="settings-container">

    <div class="settings-card">

        <h1 class="mat-headline">Account</h1>

        <ng-container *ngIf="auth.user | async as user">

            <ng-container *ngIf="user.email; else isAnonymous">
                <div class="mat-body-1">
                    <span>Email: {{user.email}}</span>

                    <ng-container *ngIf="!user.emailVerified">
                        (unverified)
                    </ng-container>
                </div>

                <ng-container *ngIf="!user.emailVerified">
                    <button mat-button (click)="auth.sendEmailVerification(forceRefreshToken)">Resend verification
                        email
                    </button>
                    <button mat-button (click)="auth.verifyUser(forceRefreshToken, showOfflinePopups)">Force update
                        verification status
                    </button>
                </ng-container>

            </ng-container>

            <ng-template #isAnonymous>
                <p class="mat-body-1">Create account</p>

                <div>
                    <button mat-raised-button color="warn" (click)="openLinkAnonymousAccountDialog()">Create account</button>
                </div>

                <mat-form-field>
                    <input matInput type="email" placeholder="Email" #email>
                </mat-form-field>

                <mat-form-field>
                    <input matInput type="password" placeholder="Password" #password>
                </mat-form-field>

                <button mat-button type="submit"
                        (click)="auth.linkAnonymousAccountToEmail(email.value, password.value)">Link to Email
                </button>

            </ng-template>

        </ng-container>


    </div>

    <div class="settings-card">

        <h1 class="mat-headline">Billing</h1>

        <app-checkout>

        </app-checkout>
    </div>
</div>
